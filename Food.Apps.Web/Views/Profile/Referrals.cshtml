@model Dictionary<int, List<UserReferralModel>>
@{
    ViewBag.Title = "Рефералы";
    Layout = "~/Views/Shared/_ProfileLayout.cshtml";
}

<div class="card">
    <div class="card-body">
        <div id="referrals-list">
            @if (Model.Count > 0)
            {
                 foreach (var item in Model)
                 {
                     <h4>Рефералы @item.Key уровня</h4>
                     @await Html.PartialAsync("_ReferralsItem", item.Value)
                     <span>Всего заработано баллов от рефералов @item.Key уровня: <strong>@Math.Round(item.Value.Sum(c => c.EarnedPoints), 2)</strong></span>
                 }
            }
            else
            {
                <h4>У пользователя нет рефералов</h4>
            }
        </div>
    </div>
</div>