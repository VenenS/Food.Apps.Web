function editUserCallback(n){$("#userDetailsModal").modal("hide");var t=JSON.parse(n);$("#admin-users").DataTable().row({selected:!0}).data(t).draw("page")}function userActions(){$(".user-lockout").on("click",function(){var r=$(this).prop("checked"),n,t,i;n=r?"True":"False";t=$("#admin-users").DataTable().row($(this).parents("tr")).data();i=JSON.stringify({user:t,isLock:n});$.ajax({type:"POST",url:"/users/lockout",data:i,contentType:"application/json; charset=UTF-8",traditional:!0,async:!1,success:function(){}})})}function editDiscount(n){var i=$(n).text(),r=$(n).prev().val(),t=$(n).closest("form");t.find(".user-discount-btn span").text(i);t.find("#CafeId").val(r);t.find("#CafeName").val(i)}(function(n){n(document).ready(function(){n("#admin-users").DataTable({language:ru,processing:!0,ajax:{type:"POST",url:"/users/getusers",dataSrc:""},select:{style:"single"},info:!1,dom:"Bfrtpl",responsive:!0,length:5,order:[[1,"asc"]],deferRender:!0,drawCallback:function(){userActions()},buttons:[{text:"Удалить",action:function(t,i){var r=i.row({selected:!0}).data(),u;r!=null&&(u=JSON.stringify({user:r}),confirm("Удалить пользователя?")&&n.ajax({type:"POST",url:"/users/delete",data:u,contentType:"application/json; charset=UTF-8",traditional:!0,success:function(){i.row({selected:!0}).remove().draw("page")}}))}},{text:"Редактировать",action:function(t,i){var r=i.row({selected:!0}).data(),u;r!=null&&(u=JSON.stringify({user:r}),n.ajax({type:"POST",url:"/users/edit",data:u,contentType:"application/json; charset=UTF-8",traditional:!0,async:!1,success:function(t){var i=n("#userDetailsModal").replaceWith(t);setTimeout("$('#userDetailsModal').modal()",300);n.validator.unobtrusive.parse("#userDetailsModal")}}))}},],columns:[{data:"Id"},{data:"UserFirstName","class":"wrap-word-td"},{data:"UserSurname","class":"wrap-word-td"},{data:"FullName","class":"wrap-word-td"},{data:"EmailAdress","class":"wrap-word-td"},{data:"PhoneNumber"},{data:"Lockout"}],columnDefs:[{targets:6,data:"Lockout",type:"string",render:function(n){var t="";return n===!0&&(t="checked"),"<input class='user-lockout' type='checkbox' "+t+"/>"},sort:"Lockout"}]})}).ajaxComplete(function(){})})(window.jQuery);