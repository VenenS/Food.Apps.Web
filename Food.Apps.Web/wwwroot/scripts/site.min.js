function initEvents(){var n,t;$("#filter").on("input",function(){$("#filter").val()!==""?($(".btn-reset").addClass("is-type"),$(".btn-search").addClass("is-type")):($(".btn-reset").removeClass("is-type"),$(".btn-search").removeClass("is-type"))});n=jQuery.datepicker._gotoToday;jQuery.datepicker._gotoToday=function(t){var r=jQuery(t),i=this._getInst(r[0]);n.call(this,t);jQuery.datepicker._selectDate(t,jQuery.datepicker._formatDate(i,i.selectedDay,i.selectedMonth,i.selectedYear))};$("body").prepend('<a href="#" class="back-to-top"><i class="fa fa-arrow-up"><\/i><\/a>');$("a.back-to-top").click(function(){return $("html, body").animate({scrollTop:0},500),!1});t=300;$(window).scroll(function(){$(window).scrollTop()>t?$("a.back-to-top").fadeIn("slow"):$("a.back-to-top").fadeOut("slow")});$('[data-toggle="popover"]').popover();$(document).on("click",".btn-copy",function(){var n=$(this).siblings(".copy-text")[0];n.select();document.execCommand("copy")});$(document).on("click",".btn-reset",function(){var n=$(this).closest("form");n.find('input[type="search"]').val("");$("span.btn-reset").removeClass("is-type");$("button.btn-search").removeClass("is-type");n.submit()});$(document).on("click",".btn-toggle-groups",function(){var n=$($(this).data("target"));if(n){var t=$(this).attr("state")^1,i=t?"minus":"plus",r=t?"Свернуть":"Развернуть";$(this).attr("state")==="0"?n.find(".collapse:not(.in)").each(function(){$(this).collapse("show")}):n.find(".collapse.in").each(function(){$(this).collapse("hide")});$(this).html('<i class="fa fa-'+i+'"><\/i> '+r+" все");$(this).attr("state",t)}});$(document).on("click",".can-submit",function(n){n.preventDefault();$(this).closest("form").submit()});$(document).on("click",".cafe-nav li > a",function(){$(".cafe-nav li").removeClass("active");$(this).parent().addClass("active")});$(document).on("click",".scroll-top",function(){$("html, body").animate({scrollTop:0},"slow")});$(document).on("change","input[type=text]",function(){var n=$(this).val().trim();$(this).val(n)});$(window).scroll(function(){$(this).scrollTop()>100?$(".scroll-top").fadeIn():$(".scroll-top").fadeOut();var n=$(window).scrollTop()+$(window).height()===$(document).height();$(".scroll-top").toggleClass("bottom",n)});$(".cart-order-actions input:submit").click(function(n){n.preventDefault();var r=$("#Address_DeliveryAddress"),t=$("#DeliveryAddress").val(),i=$("#delivery-address-btn span").data("full-address"),u=$("#delivery-form");i!==undefined&&i!==""?r.val(i):t!==undefined&&t!==""&&r.val(t);u.submit()});initCategoryBar()}function changeDirectionCollapsed(n){$(n).hasClass("collapsed")?$(n).removeClass("collapsed"):$(n).addClass("collapsed")}function initDatePickers(){var n={},t;$(".input-daterange input, .input-group.date>input").datepicker(n);$(".input-group.date span").on("click",function(){$(this).prev().datepicker("show")});$.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",showButtonPanel:!0,onClose:function(){val=$(this).datepicker("getDate");$(this).datepicker("setDate",val)}};$.datepicker.setDefaults($.datepicker.regional.ru);$(".input-daterange input, .input-group.date>input").datepicker(n);$(".input-group.date span").on("click",function(){$(this).prev().datepicker("show")});t={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",timeText:"Время",hourText:"Часы",minuteText:"Минуты",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",showButtonPanel:!0,onClose:function(){val=$(this).datetimepicker("getDate");$(this).datetimepicker("setDate",val)}};$(".input-group.datetime>input").datetimepicker(t);$(".input-group.datetime span").on("click",function(){$(this).prev().datetimepicker("show")})}function initCategoryBar(){$('#category-anchors a[data-toggle="tab"]').on("shown.bs.tab",function(){var n=$(this).attr("href");if(n!="#category-all"){const t=10,i=n.substr(t,n.length-t),r=document.getElementById("RestOfCatFilt"+i);if(!r){const t=$("#hidCafeUrlParam").val();if(t.length>0){const t=$("div[data-category='"+n+"'] .category-content").html();t&&$(n+" .category-content").html(t)}else $.get("/Cafe/TopDishesFromCat/"+i,function(t){$(n).html(t)}),$(n).html("Пожалуйста, подождите...")}$(".rest-content").css("display","none");$(".btn-rest-loaded").css("display","")}})}function showRestHideBtns(n,t){var u="catrest-"+n,i,r;$('div[data-category="'+u+'"]').css("display","");i="catbtn2-"+n;t?$('input[data-category="'+i+'"]').css("display","none"):(r="catbtn1-"+n,$('input[data-category="'+r+'"]').css("display","none"),$('input[data-category="'+i+'"]').addClass("btn btn-more btn-rest-loaded"))}function showRestHideBtns(n,t){var u="catrest-"+n,i,r;$('div[data-category="'+u+'"]').css("display","");i="catbtn2-"+n;t?$('input[data-category="'+i+'"]').css("display","none"):(r="catbtn1-"+n,$('input[data-category="'+r+'"]').css("display","none"),$('input[data-category="'+i+'"]').addClass("btn btn-more btn-rest-loaded"))}function updateSideBar(){var t=$("#shortCart").data("carttype"),i,n,r;if($("#sidebar-cart-totals")&&$.ajax({type:"GET",url:"/Cart/GetTotals?cartType="+t,traditional:!0,success:function(n){$("#sidebar-cart-totals").replaceWith(n)}}),$(".cart-item").length===0)document.getElementById("id-delivery-info")!==null?$.ajax({type:"POST",url:"/Cart/ResetOrder?cartType="+t,traditional:!0,dataType:"html",success:function(n){$("#list").replaceWith('<div id="list" class="main cart">'+n+"<\/div>");$("#id-delivery-info").remove()}}):$.ajax({type:"POST",url:"/Cart/ResetOrder?cartType="+t,traditional:!0,dataType:"html",success:function(n){$("#shortCart").html(n)}});else for(i=$(".sidebar-cart-items .card"),n=0;n<i.length;n++)r=i[n],$(r).find(".cart-item").length===0&&$(r).remove()}function resetCart(){var n=$("#shortCart").data("carttype");$(".cart").length!==0&&(n="Full");$.ajax({type:"POST",url:"/Cart/ResetOrder?cartType="+n,traditional:!0,dataType:"html",success:function(t){n==="Full"?$("#list").replaceWith('<div id="list" class="main cart row peculiar">'+t+"<\/div>"):$("#shortCart").html(t)}})}function orderExists(n){n.status===403&&$("#orderExistsModal").modal()}function scrollToTop(){$("html, body").animate({scrollTop:0},"slow")}function agreeWithTerms(){$("#confirmAgreement").change(function(){var n=$("#shortCart").find("input[type=submit]");n.attr("disabled",!this.checked)})}function orderExists(n,t){var i=$("#orderExistsModal"),r=$(i).find(".order-exist-cafe");r.attr("href",n);r.text(t);i.modal()}function updateTotalPoints(){$("#id-total-points")&&$.ajax({type:"GET",url:"/Cafe/GetTotalPoints",traditional:!0,success:function(n){$("#id-total-points").html(n)}})}function checkPaidPoints(n,t){$.ajax({type:"GET",url:"/Cart/GetTotalPriceAndDeliveryCost",traditional:!0,success:function(i){i>t&&(n.checked=!1,$("#paid-points-message").html("Недостаточно баллов"))}})}function updateCategoriesBar(){$.ajax({type:"POST",url:"/Cafe/UpdateCategoriesByFilter",traditional:!0,success:function(n){$("#category-anchors").html(n);initCategoryBar()}})}function showDishDetails(n){if($(window).width()>=1200){var t=$(n).find(".dish-detail");dishDetailTimeout=setTimeout(function(){t.show()},1e3)}}function hideDishDetails(n){var t=$(n).find(".dish-detail");t.hide();clearTimeout(dishDetailTimeout)}function order(){$(document).on("click","#id-delivery-info .dropdown li a",function(){var t=$(this).text(),n=$(this).data("full-address"),i=$("#shortCart").data("carttype");$("#id-delivery-info .dropdown span").text(t).attr("data-full-address",n);$("#Address_DeliveryAddress").val(n);$.ajax({url:"/Cart/SelectNewShippingAddress",data:{address:n,cartType:i},type:"POST",async:!1,success:n=>{$("#shortCart").html(n)}})});$(document).on("click","#Address_IsCompanyOrder",function(){var n=$(this).is(":checked")?!0:!1,t=$(this).data("companyid");$.ajax({type:"POST",url:"/Cart/UpdateCompanyAddress",data:{isCompanyOrder:n},traditional:!0,success:function(n){$("#company-delivery-address").replaceWith(n);var t=$("#delivery-form").removeData("validator").removeData("unobtrusiveValidation");$.validator.unobtrusive.parse(t);$("#Address_DeliveryAddress").val("")}})})}function CloseNewOrdersMessage(n){$("#new-orders-message").hide();$.ajax({type:"POST",url:n,traditional:!0})}function RaiseOrder(n){$("#new-orders-message").text($("#new-orders-message").text()+n);$("#new-orders-message").show();$("#new-orders-message").addClass("order-in-caffee-"+n)}function CheckNewOrders(){$("div[class^='order-in-caffee-']").show()}function HideNewOrdersMessage(){$("#new-orders-message").removeClass(function(n,t){return(t.match(/\bborder-in-caffee-\S+/g)||[]).join(" ")})}function ShowMessageModal(){$("#messageModal").modal("show")}function setPhoneMask(n,t){if(t){var i=$(n).val();typeof i=="string"&&i[0]!=="+"&&$(n).val("+"+i)}$(n).inputmask({mask:"+7 (999) 999 9999"})}function loginTimer(){loginTimerId=setInterval(function(){loginTimerCurrent<=-1?$("#id-js-link-resend").removeClass("click-none"):($("#id-js-timer").html(loginTimerCurrent),loginTimerCurrent--);loginTimerAmount<=-1?$("#SmsCode").attr("disabled",""):loginTimerAmount--},1e3)}function resendSmsCode(n){n+="?phone="+$("#Phone").val();$.ajax({method:"GET",url:n,success:function(n){$("#id-ajax-message").html(n);loginTimerAmount=120;loginTimerCurrent=120;window.clearInterval(loginTimerId);$("#id-js-link-resend").addClass("click-none");$("#SmsCode").removeAttr("disabled");loginTimer()}})}function updateDeliveryCost(n,t,i){var r=$("#delivery-"+n+"-date-"+t);r.length>0&&$.ajax({method:"GET",url:i,success:function(n){r.html(n)}})}function ChangeAddress(n,t){$.ajax({url:"/Orders/ChangeAddress",data:{OrderId:n,AddressId:t},type:"POST",async:!1,success:function(){window.location.reload()}})}var dishDetailTimeout,loginTimerId,loginTimerAmount,loginTimerCurrent;(function(n){n(document).ready(function(){initEvents();initDatePickers();n(".scrollbar-inner").scrollbar()}).ajaxComplete(function(){n(".scrollbar-inner").scrollbar();initDatePickers()});n(window).bind("load",function(){n("img").each(function(){(typeof this.naturalWidth!="undefined"&&this.naturalWidth===0||this.readyState==="uninitialized")&&n(this).remove()})})})(window.jQuery);var wrapSize=42,wrapContent=$(".nav-user-name"),wrapText=wrapContent.text();wrapText.length>wrapSize&&wrapContent.text(wrapText.slice(0,wrapSize)+"...");loginTimerAmount=120;loginTimerCurrent=120;